<ng-container *ngIf="viewModel$ | async as vm">
  <form [formGroup]="form">
    <mat-form-field
      class="example-chip-list"
      appearance="fill">
      <mat-label>Search</mat-label>
      <mat-chip-grid
        #chipGrid
        aria-label="Tag selection">
        <mat-chip-row
          *ngFor="let tag of vm.tags"
          (removed)="remove(tag)">
          {{ tag.name }}
          <button
            matChipRemove
            [attr.aria-label]="'remove ' + tag.name">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip-row>
      </mat-chip-grid>
      <input
        placeholder="New Tag..."
        #tagInput
        formControlName="search"
        [matChipInputFor]="chipGrid"
        [matAutocomplete]="auto"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="add($event)" />
      <mat-autocomplete
        #auto="matAutocomplete"
        (optionSelected)="selected($event)">
        <mat-option
          *ngFor="let tag of vm.filteredTags"
          [value]="tag.slug">
          {{ tag.name }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>

  <div
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="50"
    [scrollWindow]="false"
    (scrolled)="onScroll()"
    class="vectors">
    <button
      (click)="selectVector(vector, $event)"
      class="vector"
      *ngFor="let vector of vm.vectors">
      <img [attr.src]="vector.svg ?? vector.gif" />
    </button>
  </div>
</ng-container>
